<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}ë¡œë˜ì§€ë‹ˆ (LottoGenie){% endblock %}</title>
  <link rel="icon" type="image/png" href="/static/favicon.png">

  <!-- Open Graph / Facebook / KakaoTalk -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://lottogenie.nexthing8.com/">
  <meta property="og:title" content="ë¡œë˜ì§€ë‹ˆ - AI ë¡œë˜ ë‹¹ì²¨ ì˜ˆì¸¡">
  <meta property="og:description" content="AIê°€ ì˜ˆì¸¡í•˜ëŠ” ì´ë²ˆ ì£¼ ë¡œë˜ ë‹¹ì²¨ ë²ˆí˜¸! ë¡œë˜ì§€ë‹ˆì—ì„œ í™•ì¸í•˜ê³  ëŒ€ë°•ì˜ ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”.">
  <meta property="og:image" content="https://lottogenie.nexthing8.com/static/og_preview.png?v=3">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <style>
    body {
      font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: #333;
    }

    header {
      background-color: #6200ea;
      color: white;
      padding: 1rem;
      padding-left: 3.5rem; /* Space for menu button on left */
      padding-right: 3.5rem; /* Space for auth links on right */
      text-align: center;
      position: relative;
    }

    header h1 {
        margin: 0;
        font-size: 1.5rem;
    }

    .auth-links {
      position: absolute;
      right: 1rem;
      top: 1.2rem; /* Moved down slightly */
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .auth-links a {
      color: white;
      text-decoration: none;
      margin-left: 10px;
      font-weight: bold;
      border: 1px solid transparent;
      padding: 5px 10px;
      border-radius: 4px;
    }

    .auth-links a:hover {
        background-color: rgba(255, 255, 255, 0.2);
    }
    
    .auth-links a svg {
        display: block;
    }

    /* Menu Button */
    .menu-button {
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1001;
      background-color: rgba(98, 0, 234, 0.9);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 0;
      border-radius: 0 0 8px 0;
      cursor: pointer;
      font-size: 1.3rem;
      width: 44px;
      height: 44px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .menu-button:hover {
      background-color: rgba(55, 0, 179, 0.95);
      border-color: rgba(255, 255, 255, 0.5);
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .menu-button:active {
      transform: scale(0.95);
    }

    .menu-button.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 280px;
      height: 100vh;
      background-color: #3700b3;
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-header {
      background-color: #6200ea;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-header h2 {
      margin: 0;
      color: white;
      font-size: 1.2rem;
      border: none;
      padding: 0;
    }

    .close-button {
      background: none;
      border: none;
      color: white;
      font-size: 1.8rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .close-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    .sidebar-nav {
      padding: 0;
    }

    .sidebar-nav a {
      display: block;
      color: white;
      text-decoration: none;
      padding: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: bold;
      transition: background-color 0.2s;
    }

    .sidebar-nav a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      text-decoration: none;
    }

    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }

    .sidebar-overlay.show {
      display: block;
    }

    /* Desktop Navigation - Hide by default, show only on large screens if needed */
    .desktop-nav {
      display: none;
    }

    @media (min-width: 769px) {
      .desktop-nav {
        display: block;
        background-color: #3700b3;
        padding: 0.5rem;
        text-align: center;
      }

      .desktop-nav a {
        color: white;
        text-decoration: none;
        margin: 0 1rem;
        font-weight: bold;
      }

      .desktop-nav a:hover {
        text-decoration: underline;
      }
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    h2 {
      border-bottom: 2px solid #6200ea;
      padding-bottom: 0.5rem;
    }

    /* Common Button Styles */
    .btn {
      display: inline-block;
      background: #6200ea;
      color: white;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 4px;
      cursor: pointer;
      border: none;
      font-size: 1rem;
    }

    .btn:hover {
      background: #3700b3;
    }

    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    /* Common Ball Styles */
    .ball {
      display: inline-block;
      width: 40px;
      height: 40px;
      line-height: 40px;
      border-radius: 50%;
      text-align: center;
      margin: 0 5px;
      font-weight: 900;
      font-size: 18px;
      color: white;
      text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.4);
      box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2), 2px 2px 5px rgba(0, 0, 0, 0.2);
    }

    .ball-yellow { background: #fbc400; }
    .ball-blue { background: #69c8f2; }
    .ball-red { background: #ff7272; }
    .ball-gray { background: #aaaaaa; }
    .ball-green { background: #b0d840; }

    /* For smaller balls in history/mypage if needed, or use specific classes */
    .ball-small {
        width: 30px;
        height: 30px;
        line-height: 30px;
        font-size: 14px;
    }
    
    /* Mapping for legacy classes if any: ball-10 -> ball-yellow etc. */
    .ball-10 { background-color: #fbc400; }
    .ball-20 { background-color: #69c8f2; }
    .ball-30 { background-color: #ff7272; }
    .ball-40 { background-color: #aaaaaa; }
    .ball-45 { background-color: #b0d840; }

    /* Common Table Styles */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    th, td {
      padding: 0.75rem;
      text-align: center; /* Default to center */
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f4f4f9;
    }

    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      header {
        padding: 0.75rem;
        padding-left: 3.5rem; /* Space for menu button on left */
        padding-right: 1rem; 
      }

      header h1 {
        font-size: 1.2rem;
        padding-left: 0;
        padding-right: 0; 
      }

      .auth-links {
        right: 0.5rem;
        top: 0.5rem;
        font-size: 0.75rem;
      }

      .auth-links a {
        padding: 4px 8px;
        margin-left: 5px;
      }

      .auth-links span {
        display: none; /* Hide username on mobile */
      }

      /* Container adjustments */
      .container {
        margin: 1rem auto;
        padding: 0.75rem;
        border-radius: 4px;
      }

      h2 {
        font-size: 1.3rem;
        padding-bottom: 0.4rem;
      }

      /* Table responsive wrapper class to be used in HTML */
      .table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin-bottom: 1rem;
      }

      /* Basic table adjustments for mobile */
      th, td {
        padding: 0.5rem;
        font-size: 0.85rem;
        white-space: nowrap; /* Prevent wrapping generally */
      }

      /* Button adjustments */
      .btn {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        width: 100%;
        text-align: center;
        box-sizing: border-box;
      }

      /* Ball size adjustments */
      .ball {
        width: 32px;
        height: 32px;
        line-height: 32px;
        font-size: 14px;
        margin: 0 3px;
      }

      .ball-small {
        width: 24px;
        height: 24px;
        line-height: 24px;
        font-size: 12px;
      }
    }

    /* Very small screens */
    @media (max-width: 480px) {
      header h1 {
        font-size: 1rem;
      }

      .container {
        margin: 0.5rem;
        padding: 0.5rem;
      }

      h2 {
        font-size: 1.1rem;
      }

      th, td {
        padding: 0.4rem;
        font-size: 0.75rem;
      }

      .ball {
        width: 28px;
        height: 28px;
        line-height: 28px;
        font-size: 12px;
        margin: 0 2px;
      }
    }

  </style>
  {% block styles %}{% endblock %}
</head>

<body>

  <!-- Menu Button -->
  <button class="menu-button" onclick="toggleSidebar()" aria-label="ë©”ë‰´ ì—´ê¸°">â˜°</button>

  <!-- Sidebar -->
  <div class="sidebar-overlay" onclick="closeSidebar()"></div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>ğŸ§â€â™‚ï¸ ë¡œë˜ì§€ë‹ˆ</h2>
      <button class="close-button" onclick="closeSidebar()" aria-label="ë©”ë‰´ ë‹«ê¸°">Ã—</button>
    </div>
    <div class="sidebar-nav">
      <a href="/" onclick="closeSidebar()">ëŒ€ì‹œë³´ë“œ</a>
      <a href="/analysis" onclick="closeSidebar()">ë¶„ì„</a>
      <a href="/history" onclick="closeSidebar()">ë‹¹ì²¨ì •ë³´</a>
      {% if user %}
      <a href="/mypage" onclick="closeSidebar()">ë§ˆì´í˜ì´ì§€</a>
      <a href="#" onclick="logout(); closeSidebar(); return false;">ë¡œê·¸ì•„ì›ƒ</a>
      {% else %}
      <a href="/login" onclick="closeSidebar()">ë¡œê·¸ì¸</a>
      <a href="/register" onclick="closeSidebar()">íšŒì›ê°€ì…</a>
      {% endif %}
    </div>
  </div>

  <header>
    <h1>{% block header_title %}ğŸ§â€â™‚ï¸ ë¡œë˜ì§€ë‹ˆ (LottoGenie){% endblock %}</h1>
    <div class="auth-links">
      {% if user %}
      <span style="font-size: 0.9rem; margin-right: 5px;">{{ user.username }}ë‹˜</span>
      <a href="#" onclick="logout()" title="ë¡œê·¸ì•„ì›ƒ">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
      </a>
      {% else %}
      <a href="/login" title="ë¡œê·¸ì¸">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
      </a>
      <a href="/register" title="íšŒì›ê°€ì…">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg>
      </a>
      {% endif %}
    </div>
  </header>

  <!-- Desktop Navigation -->
  <nav class="desktop-nav">
    <a href="/">ëŒ€ì‹œë³´ë“œ</a>
    <a href="/analysis">ë¶„ì„</a>
    <a href="/history">ë‹¹ì²¨ì •ë³´</a>
    {% if user %}
    <a href="/mypage">ë§ˆì´í˜ì´ì§€</a>
    {% endif %}
  </nav>

  {% block content %}
  {% endblock %}

  <script>
    function logout() {
      document.cookie = "access_token=; path=/; max-age=0";
      window.location.href = "/";
    }

    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.querySelector('.sidebar-overlay');
      const menuButton = document.querySelector('.menu-button');
      sidebar.classList.toggle('open');
      overlay.classList.toggle('show');
      menuButton.classList.toggle('hidden');
    }

    function closeSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.querySelector('.sidebar-overlay');
      const menuButton = document.querySelector('.menu-button');
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      menuButton.classList.remove('hidden');
    }

    // Close sidebar when clicking outside
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById('sidebar');
      const menuButton = document.querySelector('.menu-button');
      const overlay = document.querySelector('.sidebar-overlay');
      
      if (sidebar.classList.contains('open') && 
          !sidebar.contains(event.target) && 
          !menuButton.contains(event.target)) {
        closeSidebar();
      }
    });
  </script>
  {% block scripts %}{% endblock %}
</body>

</html>
